---
#
#  Part of https://github.com/jaclu/ish-fstools
#
#  Copyright (c) 2025-2026: Jacob.Lundqvist@gmail.com
#
#  License: MIT
#
#  License: Private
#
# Workaround to work on older Ansible (Debian 10) where block is not supported
#
# - name: Restart sshd
#   block:
#     - name: Restart sshd service (iSH)
#       service:
#         name: sshd
#         state: restarted
#       when:
#         - is_ish | bool
#         - openrc_softlevel.stat.exists
#
#     - name: Restart sshd message (non-iSH)
#       debug:
#         msg: "-->->  restarting service sshd  <-<--"
#       when: not (is_ish | bool)
#

- name: Restart sshd service (iSH)
  service:
    name: sshd
    state: restarted
  when:
    - is_ish | bool
    - openrc_softlevel.stat.exists

- name: Restart sshd message (non-iSH)
  debug:
    msg: "Simulating service restart -->->   sshd   <-<--"

  when:
    - not (is_ish | bool)
